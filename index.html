<script>
  // üì© Submit ‚Äì T√¥i quan t√¢m g√≥i n√†y
  document.getElementById("interest-form").addEventListener("submit", function(e) {
    e.preventDefault();
    const phone = document.getElementById("zalo-phone").value;
    const pkg = document.getElementById("package-name").value;

    fetch("/api/submit", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({
        name: "Kh√°ch quan t√¢m",
        phone,
        company: "Ch∆∞a cung c·∫•p",
        package: pkg
      })
    })
    .then(res => res.json())
    .then(data => {
      alert(data.message || "‚úÖ G·ª≠i th√†nh c√¥ng!");
    })
    .catch(err => {
      console.error("[‚ùå Quan t√¢m] L·ªói:", err);
      alert("‚ö†Ô∏è Kh√¥ng th·ªÉ g·ª≠i d·ªØ li·ªáu quan t√¢m!");
    });
  });

  // üìù Submit ‚Äì T√¥i ƒë·ªìng √Ω & x√°c nh·∫≠n
  document.getElementById("register-form").addEventListener("submit", function(e) {
    e.preventDefault();
    const name = document.getElementById("name").value;
    const phone = document.getElementById("phone").value;
    const company = document.getElementById("company").value;
    const pkg = document.getElementById("package").value;

    fetch("/api/submit", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ name, phone, company, package: pkg })
    })
    .then(res => res.json())
    .then(data => {
      document.getElementById("submit-status").innerText =
        data.message || "‚úÖ ƒêƒÉng k√Ω th√†nh c√¥ng!";
    })
    .catch(err => {
      console.error("[‚ùå ƒêƒÉng k√Ω] L·ªói:", err);
      document.getElementById("submit-status").innerText = "‚ö†Ô∏è Kh√¥ng th·ªÉ k·∫øt n·ªëi h·ªá th·ªëng.";
    });
  });

  // üß™ Submit ‚Äì Test webhook n√¢ng cao
  document.getElementById("webhook-test-form").addEventListener("submit", function(e) {
    e.preventDefault();
    const phone = document.getElementById("test-zalo").value;
    const note = document.getElementById("test-note").value;

    fetch("/api/submit", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({
        app_id: "2992023153139013305",
        event_type: "test-webhook",
        payload: {
          message: `üì© Zalo ${phone} g·ª≠i test: ${note}`
        }
      })
    })
    .then(res => res.json())
    .then(data => {
      document.getElementById("webhook-status").innerText =
        data.message || "‚úÖ Webhook ƒë√£ nh·∫≠n!";
    })
    .catch(err => {
      console.error("[‚ùå Webhook Test] L·ªói:", err);
      document.getElementById("webhook-status").innerText = "‚ö†Ô∏è Kh√¥ng th·ªÉ k·∫øt n·ªëi.";
    });
  });
</script>
